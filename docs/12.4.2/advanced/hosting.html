<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Hosting · | Developer&#x27;s Guide</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## Overview"/><meta name="docsearch:version" content="12.4.2"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Hosting · | Developer&#x27;s Guide"/><meta property="og:type" content="website"/><meta property="og:url" content="https://Michael-N-M.github.io/botpress-docs/"/><meta property="og:description" content="## Overview"/><meta property="og:image" content="https://Michael-N-M.github.io/botpress-docs/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://Michael-N-M.github.io/botpress-docs/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/botpress-docs/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="/js/hotjar.js"></script><script src="/botpress-docs/js/scrollSpy.js"></script><link rel="stylesheet" href="/botpress-docs/css/main.css"/><script src="/botpress-docs/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/botpress-docs/"><img class="logo" src="/botpress-docs/img/botpress_icon.svg" alt="| Developer&#x27;s Guide"/><h2 class="headerTitleWithLogo">| Developer&#x27;s Guide</h2></a><a href="/botpress-docs/versions"><h3>12.4.2</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/botpress-docs/docs/12.4.2/introduction" target="_self">Docs</a></li><li class=""><a href="https://botpress.com/reference/" target="_self">SDK</a></li><li class=""><a href="https://forum.botpress.com/" target="_self">Community</a></li><li class=""><a href="https://github.com/botpress/botpress" target="_self">Github</a></li><li class=""><a target="_self"></a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Advanced Guides</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Release Notes<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/releases/release-notes">Release Notes</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/releases/migrate">Migrations</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Getting Started<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/introduction">Introduction</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/installation">Installation</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/quickstart">Quick Start</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/updating">Updating to New Releases</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/troubleshoot">Troubleshoot</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Main Concepts<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/main/overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/main/content">CMS</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/main/dialog">Dialog Engine</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/main/code">Actions &amp; Hooks</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/main/memory">Memory</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/main/module">Modules</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/main/nlu">NLU</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/main/emulator">Emulator</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Advanced Guides<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/advanced/debug">Debug</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/advanced/configuration">Configurations</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/advanced/authentication">Authentication Methods</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/advanced/i18n">Internationalization</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/advanced/custom-module">Custom Module</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/advanced/analytics">Custom Analytics</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/advanced/performances">Hardware &amp; Performances</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/botpress-docs/docs/12.4.2/advanced/hosting">Hosting</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/advanced/versions">Version Control</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/advanced/pipelines">Bot Pipelines</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/advanced/development-pipeline">Development Pipelines</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/advanced/cluster">Clustering</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/advanced/monitoring">Monitoring &amp; Alerting</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Channels<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/channels/web">Website Embedding</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/channels/messenger">Facebook Messenger</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/channels/telegram">Telegram</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/channels/teams">Microsoft Teams</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/channels/converse">Converse API</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/channels/slack">Slack</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/channels/faq">FAQ</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Tutorials<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/tutorials/cluster-digital-ocean">Deploying a cluster on Digital Ocean</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/tutorials/intent-matching">How to act on an intent</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/tutorials/proactive">Acting Proactively</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/tutorials/carousel-postback">Using Carousel Postback</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/tutorials/skill-slot">How to use Slot Skill</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/tutorials/skill-call-api">How to use Call API</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/tutorials/external-api">Calling an API in a Custom Action</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/tutorials/shortlinks">Shortlinks</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/tutorials/existing-backend">Connecting your bot with your existing backend</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/tutorials/database">Supported databases</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/tutorials/timeouts">Timeouts</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/tutorials/hitl">Human in the loop</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/tutorials/jump-to">Jump To</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/tutorials/interbot">Inter-bot Communication / Delegation</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/tutorials/contextual-faq">Contextual FAQ</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/tutorials/chat-3rd-party-OAuth">Authenticate a user against a 3rd Party OAuth</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/tutorials/listen-file-changes">Listening for file changes</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/tutorials/3rd-party-NLU">Using a 3rd party NLU</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/tutorials/uipath">Using the UiPath integration for Botpress</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Pro Edition<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/pro/about-pro">About</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/pro/licensing">Licensing</a></li><li class="navListItem"><a class="navItem" href="/botpress-docs/docs/12.4.2/pro/rbac">Configuring RBAC</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Hosting</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="overview"></a><a href="#overview" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Overview</h2>
<p>When you are ready to open your bot to the world, you should deploy it in production mode. When the bot is started in production, the botpress file system (BPFS) is enabled <a href="versions">click here for more details</a> and debug logs are no longer displayed. We also <strong>strongly</strong> recommend using PostgreSQL instead of the embedded SQLite.</p>
<h2><a class="anchor" aria-hidden="true" id="offline-servers"></a><a href="#offline-servers" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Offline Servers</h2>
<p>Botpress communicates with two services in order to work properly (i.e. Duckling and a Language Server). If your Botpress installation has <strong>no internet</strong> access, you'll have to host these services on-prem. When following the different hosting methods, look for a section on on-prem hosting for further details.</p>
<h3><a class="anchor" aria-hidden="true" id="duckling"></a><a href="#duckling" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Duckling</h3>
<p>We use Duckling to extract system entities (e.g. time, email, currency, etc.). This service is very light and requires minimal resources.</p>
<h3><a class="anchor" aria-hidden="true" id="language-server"></a><a href="#language-server" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Language Server</h3>
<p>The Language Server is used to provide the language models necessary to run the NLU.</p>
<p>By default, the Language Server is configured to get <code>100</code> dimensions for words. If you plan to use that Language Server in production, we highly recommend setting the dimensions to <code>300</code> for a better vocabulary.</p>
<table>
<thead>
<tr><th>Dimensions</th><th>RAM Usage *</th><th>Disk Usage *</th></tr>
</thead>
<tbody>
<tr><td>100</td><td>~1.3 Gb</td><td>~900 Mb</td></tr>
<tr><td>300</td><td>~3.5 Gb</td><td>~3 Gb</td></tr>
</tbody>
</table>
<p>* Per language</p>
<ol>
<li>Open this metadata file: <a href="https://botpress-public.nyc3.digitaloceanspaces.com/embeddings/index.json">https://botpress-public.nyc3.digitaloceanspaces.com/embeddings/index.json</a></li>
<li>Download the <code>bpe</code> and <code>embeddings</code> files corresponding to your languages. For instance, for french, download the <code>bp.fr.bpe.model</code> file located under <code>remoteUrl</code> and the <code>bp.fr.300.bin</code> also located under <code>remoteUrl</code>.</li>
<li>Once the files are downloaded, place them somewhere on your server filesystem and take note of the path.</li>
<li>Add the <code>--offline</code> and the <code>--dim &lt;number&gt;</code> arguments to your command when starting the language server. i.e. <code>./bp lang --offline --dim &lt;number&gt; --langDir &lt;some_path&gt;</code>. Make sure that the dimension argument match the dimensions of the models you have downloaded e.g. <code>bp.en.300.bin</code>.</li>
</ol>
<blockquote>
<p><strong>Note</strong>: <code>300</code> is the number of dimensions the model has. More dimensions means the model size is bigger. You can choose a lighter model if your server specs are limited, but keep in mind that you need to change the <code>--dim</code> parameter when you start the Language Server (e.g. <code>./bp lang --dim &lt;number&gt;</code>).</p>
</blockquote>
<table>
<thead>
<tr><th>Abbreviation</th><th>Language</th></tr>
</thead>
<tbody>
<tr><td>ar</td><td>Arabic</td></tr>
<tr><td>en</td><td>English</td></tr>
<tr><td>fr</td><td>French</td></tr>
<tr><td>ja</td><td>Japanese</td></tr>
<tr><td>pt</td><td>Portuguese</td></tr>
<tr><td>ru</td><td>Russian</td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="binary"></a><a href="#binary" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Binary</h2>
<p>Run the following command in your command line:</p>
<pre><code class="hljs css language-bash">EXTERNAL_URL=&lt;public_url&gt; \
BP_PRODUCTION=<span class="hljs-literal">true</span> \
BPFS_STORAGE=database \
DATABASE_URL=postgres://login:password@host:port/database \
./bp
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="hosting-duckling-and-the-language-server"></a><a href="#hosting-duckling-and-the-language-server" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Hosting Duckling and the Language Server</h3>
<p>This step is optional. Your Botpress installation will use our hosted services by default.</p>
<h4><a class="anchor" aria-hidden="true" id="duckling-1"></a><a href="#duckling-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Duckling</h4>
<p>When you have the duckling binary, simply edit the file <code>data/global/config/nlu.json</code> and set the parameter <code>ducklingURL</code> to where you run Duckling, for example, if it's on the same server as Botpress (and if you use the default port of <code>8000</code>), you would set:</p>
<pre><code class="hljs css language-js">{
  ...
  <span class="hljs-string">"ducklingURL"</span>: <span class="hljs-string">"http://localhost:8000"</span>
}
</code></pre>
<ul>
<li><p><strong>Linux and Mac</strong>: Duckling must be compiled to run correctly on your specific system. Therefore, you will need to install the software development tools and build it from source.
Please follow the instructions on the <a href="https://github.com/facebook/duckling">GitHub page of Duckling</a>. We may provide some binaries in the future for common OS.</p></li>
<li><p><strong>Windows</strong>: If you run Botpress on windows, there is a zip file available <a href="https://s3.amazonaws.com/botpress-binaries/tools/duckling/duckling-windows.zip">here</a>.
Simply double-click on run-duckling.bat (the bat file simply sets the code page of the console to UTF-8, then runs the executable). The folder <code>zoneinfo</code> includes the Olson timezones which are already available by default on other OS.</p></li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="language-server-1"></a><a href="#language-server-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Language Server</h4>
<p>The language server is embedded in Botpress and can be started by command line. Here are the steps to run it and use it with your Botpress Server:</p>
<ol>
<li>Start the language server with <code>./bp lang</code></li>
<li>In <code>data/global/config/nlu.json</code>, change <code>languageSources.endpoint</code> to <code>http://localhost:3100</code></li>
<li>Restart Botpress and open the Languages page on the Admin Panel</li>
<li>Install the desired languages your server should support</li>
<li>Restart the language server with parameters <code>./bp lang --readOnly</code></li>
</ol>
<p>ReadOnly prevents anyone from adding or removing languages and can only be used to fetch embeddings. There are additional parameters that can be configured (for example, to require authentication), you can see them by typing <code>./bp lang help</code>.</p>
<p><strong>Offline Server</strong>: Follow the Offline Server <a href="#offline-servers">instructions</a> if you're running a server without Internet access.</p>
<h2><a class="anchor" aria-hidden="true" id="docker"></a><a href="#docker" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Docker</h2>
<p>This command will run Botpress within a single container and use the remote Duckling and Language Server. You can get the latest <code>stable</code> or <code>nightly</code> versions on <a href="https://hub.docker.com/r/botpress/server/tags">DockerHub</a>.</p>
<blockquote>
<p><code>nightly</code> versions are unstable and should <strong>not</strong> be used in production.</p>
</blockquote>
<pre><code class="hljs"><span class="hljs-attr">docker</span> <span class="hljs-string">run -d \
--name botpress \
-p 3000:3000 \
-v botpress_data:/botpress/data \
botpress/server:$TAG</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="hosting-duckling-and-the-language-server-1"></a><a href="#hosting-duckling-and-the-language-server-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Hosting Duckling and the Language Server</h3>
<p>This step is optional. Your Botpress installation will use our hosted services by default.</p>
<p>Choose to either run one of two containers (two containers is recommended).</p>
<h4><a class="anchor" aria-hidden="true" id="running-a-single-container"></a><a href="#running-a-single-container" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Running a Single Container</h4>
<blockquote>
<p>⚠️ Running multiple processes inside a single container should <strong>never</strong> be done in production.</p>
</blockquote>
<p>This will run Duckling, the Language Server and Botpress Server within the same container. It will set some environment variables so that services talk to each other.</p>
<pre><code class="hljs css language-bash">docker run -d \
--name bp \
-p 3000:3000 -p 3100:3100 \
-v botpress_data:/botpress/data \
-e BP_MODULE_NLU_LANGUAGESOURCES=<span class="hljs-string">'[{ "endpoint": "http://localhost:3100" }]'</span> \
botpress/server:<span class="hljs-variable">$TAG</span> \
bash -c <span class="hljs-string">"./duckling &amp; ./bp lang --langDir /botpress/data/embeddings &amp; ./bp"</span>
</code></pre>
<p><strong>Offline Server</strong>: Follow the Offline Server <a href="#offline-servers">instructions</a> if you're running a server without Internet access.</p>
<h4><a class="anchor" aria-hidden="true" id="running-multiple-containers"></a><a href="#running-multiple-containers" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Running Multiple Containers</h4>
<ol>
<li>Run the Language Server.</li>
</ol>
<pre><code class="hljs css language-bash">docker run -d \
--name lang \
-p 3100:3100 \
-v botpress_data:/botpress/data \
botpress/server:<span class="hljs-variable">$TAG</span> \
bash -c <span class="hljs-string">"./bp lang --langDir /botpress/data/embeddings"</span>
</code></pre>
<ol start="2">
<li>Run Botpress Server and Duckling within the same container. The usage of Duckling is very light here so we can justify using it in the same container as Botpress Server.</li>
</ol>
<pre><code class="hljs css language-bash">docker run -d \
--name bp \
-p 3000:3000 \
-v botpress_data:/botpress/data \
-e BP_MODULE_NLU_LANGUAGESOURCES=<span class="hljs-string">'[{ "endpoint": "http://localhost:3100" }]'</span> \
botpress/server:<span class="hljs-variable">$TAG</span> \
bash -c <span class="hljs-string">"./duckling &amp; ./bp"</span>
</code></pre>
<p><strong>Offline Server</strong>: Follow the Offline Server <a href="#offline-servers">instructions</a> if you're running a server without Internet access.</p>
<h2><a class="anchor" aria-hidden="true" id="heroku"></a><a href="#heroku" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Heroku</h2>
<h3><a class="anchor" aria-hidden="true" id="prerequisite"></a><a href="#prerequisite" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Prerequisite</h3>
<ul>
<li>If you don't already have a Heroku account, you can create one for free <a href="https://signup.heroku.com">here</a>.</li>
<li>Install the Heroku CLI by following <a href="https://devcenter.heroku.com/articles/heroku-cli">these instructions</a>.</li>
<li>Type <code>heroku login</code> in your terminal to log in to Heroku.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="preparing-the-docker-image"></a><a href="#preparing-the-docker-image" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Preparing the Docker image</h3>
<p>To create a new bot from scratch, simply create a file named <code>Dockerfile</code> in any directory. Write this snippet in the file (and replace $VERSION with the latest one in <a href="https://hub.docker.com/r/botpress/server/tags/">hub.docker.com</a>)</p>
<pre><code class="hljs css language-docker"><span class="hljs-keyword">FROM</span> botpress/server:$VERSION
<span class="hljs-keyword">WORKDIR</span><span class="bash"> /botpress</span>
<span class="hljs-keyword">CMD</span><span class="bash"> [<span class="hljs-string">"/bin/bash"</span>, <span class="hljs-string">"-c"</span>, <span class="hljs-string">"./duckling &amp; ./bp"</span>]</span>
</code></pre>
<p>Make sure Docker is running on your computer. Then open a command prompt and type these commands:</p>
<pre><code class="hljs css language-bash"><span class="hljs-comment"># This will create a new app with a random name. Copy the name, we'll need it later</span>
heroku create

<span class="hljs-comment"># Creating app... done, ⬢ glacial-inlet-29943</span>
<span class="hljs-comment"># https://glacial-inlet-29943.herokuapp.com/ | https://git.heroku.com/glacial-inlet-29943.git</span>

<span class="hljs-comment"># Login to the container registry</span>
heroku container:login

<span class="hljs-comment"># This uses your Dockerfile to build the image.</span>
heroku container:push web --app <span class="hljs-variable">$APP_NAME</span>

<span class="hljs-comment"># This is the last step, your bot will be available at https://$APP_NAME.herokuapp.com/</span>
heroku container:release web --app <span class="hljs-variable">$APP_NAME</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="deploying-with-existing-data"></a><a href="#deploying-with-existing-data" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Deploying with existing data</h3>
<p>If you have already built a bot and want to host it on Heroku, add your <code>data</code> folder in the same folder as the <code>Dockerfile</code>. The structure should look like this:</p>
<pre><code class="hljs css language-bash">my-new-bot
├── Dockerfile
└── data
    ├── bots
    └── global
</code></pre>
<p>Edit the <code>Dockerfile</code> so it looks like this, then deploy it with the same instructions as before:</p>
<pre><code class="hljs css language-docker"><span class="hljs-keyword">FROM</span> botpress/server:$VERSION
<span class="hljs-keyword">ADD</span><span class="bash"> . /botpress</span>
<span class="hljs-keyword">WORKDIR</span><span class="bash"> /botpress</span>
<span class="hljs-keyword">CMD</span><span class="bash"> [<span class="hljs-string">"./bp"</span>]</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="using-postgres-as-the-database"></a><a href="#using-postgres-as-the-database" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using Postgres as the database</h3>
<p>By default, Botpress uses SQLite as a database for persistence. This doesn't work well on Heroku because it has ephemeral storage, which means data will get lost every day or so. The best is to switch the database to Postgres (please make sure you are using Postgres 9.5 or higher):</p>
<pre><code class="hljs css language-bash"><span class="hljs-comment"># Get a free Postgres database</span>
heroku addons:create heroku-postgresql --app <span class="hljs-variable">$APP_NAME</span>

<span class="hljs-comment"># Tell Botpress to use Postgres</span>
heroku config:<span class="hljs-built_in">set</span> DATABASE=postgres --app <span class="hljs-variable">$APP_NAME</span>
</code></pre>
<p>You don't have to change anything else, since Heroku will define the DATABASE_URL environment variable with the required parameters. It is also possible to find your Postgres credentials on the Heroku dashboard: Overview &gt; Heroku Postgres &gt; Settings &gt; View Credentials.</p>
<h2><a class="anchor" aria-hidden="true" id="aws"></a><a href="#aws" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>AWS</h2>
<p>These steps shows how to deploy manually your bot on Amazon EC2. Create a new instance on EC2 (or use an existing one), and type the following commands:</p>
<pre><code class="hljs css language-bash">sudo apt update
sudo apt install unzip

<span class="hljs-comment"># Download the latest Linux binary</span>
wget https://s3.amazonaws.com/botpress-binaries/botpress-<span class="hljs-variable">$VERSION</span>-linux-x64.zip

<span class="hljs-comment"># Unzip the content in the current directory</span>
unzip botpress-<span class="hljs-variable">$VERSION</span>-linux-x64.zip

<span class="hljs-comment"># Launch the app</span>
./bp
</code></pre>
<p>This gets you up and running locally on port 3000.</p>
<h3><a class="anchor" aria-hidden="true" id="setting-up-nginx"></a><a href="#setting-up-nginx" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Setting up NGINX</h3>
<p>NGINX will allow us to reach two goals: serve as a reverse proxy and handle caching of assets.</p>
<pre><code class="hljs css language-bash">apt install nginx
sudo mkdir /tmp/nginx_cache
</code></pre>
<p>Then, edit the file <code>/etc/nginx/sites-available/default</code> and configure it using our suggested configuration (in a section below)</p>
<h3><a class="anchor" aria-hidden="true" id="securing-your-bot-https"></a><a href="#securing-your-bot-https" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Securing your bot (HTTPS)</h3>
<p>To secure your installation, we will use Let's encrypt:</p>
<pre><code class="hljs css language-bash">sudo apt-get install software-properties-common
sudo add-apt-repository ppa:certbot/certbot
sudo apt-get update
sudo apt-get install python-certbot-nginx
sudo certbot --nginx
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="monitoring-and-resilience"></a><a href="#monitoring-and-resilience" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Monitoring and resilience</h3>
<p>If you want to add resilience so your bot is restarted if there's an issue, we recommend using PM2.</p>
<pre><code class="hljs css language-bash">sudo apt install npm
sudo npm install -g pm2
sudo pm2 startup
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="secure-configuration-for-the-nginx-server"></a><a href="#secure-configuration-for-the-nginx-server" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Secure configuration for the NGINX server</h3>
<p>This is the configuration we recommend deploying Botpress in production.</p>
<pre><code class="hljs css language-bash">http {
  <span class="hljs-comment"># Disable sending the server identification</span>
  server_tokens off;

  <span class="hljs-comment"># Prevent displaying Botpress in an iframe (clickjacking protection)</span>
  add_header X-Frame-Options SAMEORIGIN;

  <span class="hljs-comment"># Prevent browsers from detecting the mimetype if not sent by the server.</span>
  add_header X-Content-Type-Options nosniff;

  <span class="hljs-comment"># Force enable the XSS filter for the website, in case it was disabled manually</span>
  add_header X-XSS-Protection <span class="hljs-string">"1; mode=block"</span>;

  <span class="hljs-comment"># Configure the cache for static assets</span>
  proxy_cache_path /sr/nginx_cache levels=1:2 keys_zone=my_cache:10m max_size=10g
                inactive=60m use_temp_path=off;

  <span class="hljs-comment"># Set the max file size for uploads (make sure it is larger than the configured media size in botpress.config.json)</span>
  client_max_body_size 10M;

  <span class="hljs-comment"># Configure access</span>
  log_format  main  <span class="hljs-string">'$remote_addr - $remote_user [$time_local] "$request" '</span>
                    <span class="hljs-string">'$status $body_bytes_sent "$http_referer" '</span>
                    <span class="hljs-string">'"$http_user_agent" "$http_x_forwarded_for"'</span>;

  access_log  logs/access.log  main;
  error_log  logs/error.log;

  <span class="hljs-comment"># Redirect unsecure requests to the HTTPS endpoint</span>
  server {
    listen 80 default;
    server_name  localhost;

    <span class="hljs-built_in">return</span> 301 https://<span class="hljs-variable">$server_name</span><span class="hljs-variable">$request_uri</span>;
  }

  server {
    listen 443 http2 ssl;
    server_name localhost;

    ssl_certificate      cert.pem;
    ssl_certificate_key  cert.key;

    <span class="hljs-comment"># Force the use of secure protocols only</span>
    ssl_prefer_server_ciphers on;
    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;

    <span class="hljs-comment"># Enable session cache for added performances</span>
    ssl_session_cache shared:SSL:50m;
    ssl_session_timeout 1d;
    ssl_session_tickets off;

    <span class="hljs-comment"># Added security with HSTS</span>
    add_header Strict-Transport-Security <span class="hljs-string">"max-age=31536000; includeSubdomains; preload"</span>;

    <span class="hljs-comment"># Enable caching of assets by NGINX to reduce load on the server</span>
    location ~ .*/assets/.* {
      proxy_cache my_cache;
      proxy_ignore_headers Cache-Control;
      proxy_hide_header Cache-Control;
      proxy_hide_header Pragma;
      proxy_pass http://localhost:3000;
      proxy_cache_valid any 30m;
      proxy_set_header Cache-Control max-age=30;
      add_header Cache-Control max-age=30;
    }

    <span class="hljs-comment"># We need to add specific headers so the websockets can be set up through the reverse proxy</span>
    location /socket.io/ {
      proxy_pass http://localhost:3000/socket.io/;
      proxy_http_version 1.1;
      proxy_set_header Upgrade <span class="hljs-variable">$http_upgrade</span>;
      proxy_set_header Connection <span class="hljs-string">"Upgrade"</span>;
    }

    <span class="hljs-comment"># All other requests should be directed to the server</span>
    location / {
      proxy_pass http://localhost:3000;
    }
  }
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="aws-using-dokku"></a><a href="#aws-using-dokku" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>AWS using Dokku</h2>
<p>Dokku is like a mini heroku on-prem. Once setup on your host, it's very easy to push deployments via a simple git push.</p>
<h3><a class="anchor" aria-hidden="true" id="creating-your-ec2-instance"></a><a href="#creating-your-ec2-instance" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating your EC2 instance</h3>
<ol>
<li>Open the EC2 Dashboard and click on <code>Instances</code>. Press the <code>Launch Instance</code> button</li>
<li>At the <code>Choose AMI</code> step, we recommend using Ubuntu Server 18.04 LTS, we also support Centos 7.5, Debian 8.11, Red-hat 7.5, Ununtu 16.04</li>
<li>Click on the tab named <code>6. Configure Security Group</code></li>
<li>Add these rules:</li>
</ol>
<ul>
<li>HTTP</li>
<li>HTTPS</li>
<li>Custom Port (3000)</li>
</ul>
<ol start="5">
<li>Click <code>Review and Launch</code>, then connect to your newly created instance using SSH</li>
</ol>
<h3><a class="anchor" aria-hidden="true" id="install-and-configure-dokku"></a><a href="#install-and-configure-dokku" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Install and configure Dokku</h3>
<p>We have summarised the required steps, but you can <a href="http://dokku.viewdocs.io/dokku~v0.12.13/getting-started/installation/">follow the official guide</a> if you prefer.</p>
<pre><code class="hljs css language-bash">wget https://raw.githubusercontent.com/dokku/dokku/v0.12.13/bootstrap.sh
sudo DOKKU_TAG=v0.12.13 bash bootstrap.sh
</code></pre>
<p>Once setup is completed, open your web browser to your server's IP address and follow the instructions to configure your public key. This is the key that will be used when you will push your content to deploy your bot.</p>
<p>Then, on your Dokku host, type this command to create a new app. We are using <code>botpress-server</code> in this guide, but it could be anything you'd like.</p>
<pre><code class="hljs css language-bash">dokku apps:create botpress-server
</code></pre>
<p>Now that everything is setup correctly on your remote host, let's deploy it.</p>
<p>On your local host, create an empty directory and add a file named <code>Dockerfile</code> with the following content:</p>
<pre><code class="hljs css language-docker"><span class="hljs-keyword">FROM</span> botpress/server:$VERSION
<span class="hljs-keyword">WORKDIR</span><span class="bash"> /botpress</span>
<span class="hljs-keyword">CMD</span><span class="bash"> [<span class="hljs-string">"./bp"</span>]</span>
</code></pre>
<p>When you push your repository to your Dokku host, it will automatically build the image and launch it.</p>
<p>Type these commands :</p>
<pre><code class="hljs css language-bash"><span class="hljs-comment"># Initialize a new repository</span>
git init

<span class="hljs-comment"># Adds a new destination when pushing content on that repository.</span>
<span class="hljs-comment"># Your Dokku host will receive the content and will execute the Dockerfile</span>
git remote add dokku dokku@<span class="hljs-variable">$YOUR_EC2_IP_ADDRESS</span>:botpress-server

<span class="hljs-comment"># Add the files, commit and push them to the host</span>
git add .
git commit -m first
git push dokku master
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="adding-a-postgres-database"></a><a href="#adding-a-postgres-database" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adding a POSTGRES database</h3>
<p>Now your bot is running on the host, but it is still using the SQLite database. Fortunately, Dokku has an open-source plugin that makes it very easy to setup the required database.</p>
<pre><code class="hljs css language-bash"><span class="hljs-comment"># This will download and install the Postgres plugin</span>
sudo dokku plugin:install https://github.com/dokku/dokku-postgres.git

<span class="hljs-comment"># Creates a new database and link it to your application</span>
dokku postgres:create botpress-db
dokku postgres:link botpress-db botpress-server

<span class="hljs-comment"># Tell Botpress what kind of database to use</span>
dokku config:<span class="hljs-built_in">set</span> botpress-server DATABASE=postgres
</code></pre>
<p>As with Heroku, the <code>DATABASE_URL</code> environment variable will already be set.</p>
<h3><a class="anchor" aria-hidden="true" id="example"></a><a href="#example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h3>
<p><code>channel-web.infoPage.description</code> --&gt; <code>BP_MODULE_CHANNEL_WEB_INFOPAGE_DESCRIPTION</code></p>
<blockquote>
<p><strong>Deprecation warning</strong>: The old <code>BP_%MODULENAME%_%config%</code> is deprecated and will be removed in Botpress 12.</p>
</blockquote>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/botpress-docs/docs/12.4.2/advanced/performances"><span class="arrow-prev">← </span><span>Performances</span></a><a class="docs-next button" href="/botpress-docs/docs/12.4.2/advanced/versions"><span>Version Control</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#overview">Overview</a></li><li><a href="#offline-servers">Offline Servers</a><ul class="toc-headings"><li><a href="#duckling">Duckling</a></li><li><a href="#language-server">Language Server</a></li></ul></li><li><a href="#binary">Binary</a><ul class="toc-headings"><li><a href="#hosting-duckling-and-the-language-server">Hosting Duckling and the Language Server</a></li></ul></li><li><a href="#docker">Docker</a><ul class="toc-headings"><li><a href="#hosting-duckling-and-the-language-server-1">Hosting Duckling and the Language Server</a></li></ul></li><li><a href="#heroku">Heroku</a><ul class="toc-headings"><li><a href="#prerequisite">Prerequisite</a></li><li><a href="#preparing-the-docker-image">Preparing the Docker image</a></li><li><a href="#deploying-with-existing-data">Deploying with existing data</a></li><li><a href="#using-postgres-as-the-database">Using Postgres as the database</a></li></ul></li><li><a href="#aws">AWS</a><ul class="toc-headings"><li><a href="#setting-up-nginx">Setting up NGINX</a></li><li><a href="#securing-your-bot-https">Securing your bot (HTTPS)</a></li><li><a href="#monitoring-and-resilience">Monitoring and resilience</a></li><li><a href="#secure-configuration-for-the-nginx-server">Secure configuration for the NGINX server</a></li></ul></li><li><a href="#aws-using-dokku">AWS using Dokku</a><ul class="toc-headings"><li><a href="#creating-your-ec2-instance">Creating your EC2 instance</a></li><li><a href="#install-and-configure-dokku">Install and configure Dokku</a></li><li><a href="#adding-a-postgres-database">Adding a POSTGRES database</a></li><li><a href="#example">Example</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><div><h5>Docs</h5><a href="/botpress-docs/docs/introduction">Getting Started</a><a href="https://botpress.com/reference/">API Reference</a></div><div><h5>Community</h5><a href="https://forum.botpress.com/" target="_blank" rel="noreferrer noopener">forum.botpress.com</a><a href="https://stackoverflow.com/search?q=botpress" target="_blank" rel="noreferrer noopener">Stack Overflow</a></div><div><h5>More</h5><a href="https://github.com/botpress">GitHub</a><a class="github-button" href="https://github.com/botpress/botpress" data-icon="octicon-star" data-count-href="/botpress/botpress/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a><a href="https://twitter.com/getbotpress">Twitter</a></div></section><a href="https://botpress.com/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/botpress-docs/img/botpress.svg" alt="Botpress, Inc." width="170" height="45"/></a><section class="copyright">Copyright © 2020 Botpress, Inc.</section></footer></div></body></html>
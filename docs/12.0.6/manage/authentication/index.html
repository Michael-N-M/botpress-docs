<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Authentication · | Developer&#x27;s Guide</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="There&#x27;s two different types of authentication, and different methods for each:"/><meta name="docsearch:version" content="12.0.6"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Authentication · | Developer&#x27;s Guide"/><meta property="og:type" content="website"/><meta property="og:url" content="https://Michael-N-M.github.io/botpress-docs/"/><meta property="og:description" content="There&#x27;s two different types of authentication, and different methods for each:"/><meta property="og:image" content="https://Michael-N-M.github.io/botpress-docs/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://Michael-N-M.github.io/botpress-docs/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/botpress-docs/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="/js/hotjar.js"></script><script src="/botpress-docs/js/scrollSpy.js"></script><link rel="stylesheet" href="/botpress-docs/css/main.css"/><script src="/botpress-docs/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/botpress-docs/"><img class="logo" src="/botpress-docs/img/botpress_icon.svg" alt="| Developer&#x27;s Guide"/><h2 class="headerTitleWithLogo">| Developer&#x27;s Guide</h2></a><a href="/botpress-docs/versions"><h3>12.0.6</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/botpress-docs/docs/12.0.6/introduction" target="_self">Docs</a></li><li class=""><a href="https://botpress.com/reference/" target="_self">SDK</a></li><li class=""><a href="https://forum.botpress.com/" target="_self">Community</a></li><li class=""><a href="https://github.com/botpress/botpress" target="_self">Github</a></li><li class=""><a target="_self"></a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Authentication</h1></header><article><div><span><p>There's two different types of authentication, and different methods for each:</p>
<ol>
<li><strong>Admin</strong>: Allow a user to access the Admin UI and manage bots</li>
<li><strong>User</strong>: Identify a user which is chatting with your bot</li>
</ol>
<p>We support Basic, SAML and LDAP for the Admin authentication.</p>
<p>User Authentication is managed using JWT tokens</p>
<h2><a class="anchor" aria-hidden="true" id="admin-authentication"></a><a href="#admin-authentication" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Admin Authentication</h2>
<p>There are 3 different type of authentication methods. By default, the <code>basic</code> method is used.</p>
<h3><a class="anchor" aria-hidden="true" id="basic"></a><a href="#basic" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Basic</h3>
<p>Users logs in with an Email / Password combination. Information is saved in the file <code>data/global/workspaces.json</code>, and they are salted for added security.</p>
<p>To create more accounts, visit the <code>Collaborators</code> tab on the Admin UI. Choose the role and enter the E-mail of your collaborator, then you will receive a random password. The user will need to pick a password after the first login.</p>
<p>To enable this authentication method, set <code>pro.auth.strategy = 'basic'</code> in your <code>botpresss.config.json</code> file.</p>
<h4><a class="anchor" aria-hidden="true" id="forgot-your-password"></a><a href="#forgot-your-password" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Forgot your password?</h4>
<p>If you forget your password and cannot access your bot, open the <code>workspaces.json</code> file and delete the user account. You will be prompted to create an account the next time you access the Admin UI.</p>
<p>Replace the following content with <code>&quot;users&quot;: []</code></p>
<pre><code class="hljs css language-js"><span class="hljs-string">"users"</span>: [
  {
    <span class="hljs-string">"email"</span>: <span class="hljs-string">"admin@botpress.com"</span>,
    <span class="hljs-string">"password"</span>: <span class="hljs-string">"713f2a9c8382c8bec72dced71c787adf4ba3d0aa635a8201b0ee78700758919b4eb042ac4f2c8848bbdde05a734185f85903426b6fbc0fe8c76493e28bbcc7b3"</span>,
    <span class="hljs-string">"salt"</span>: <span class="hljs-string">"2af382287ebef39d"</span>,
    <span class="hljs-string">"firstname"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-string">"lastname"</span>: <span class="hljs-string">"sdf"</span>
  }
]
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="saml"></a><a href="#saml" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>SAML</h3>
<p>You can link your SAML Identity Provider seamlessly with Botpress. When it is enabled, Admins will be greeted with a <code>Sign in with SSO</code> button on the Admin UI. The first user to ever login to Botpress using the SSO provider will automatically have an account created and will be a Super Admin.</p>
<p>When a user successfully log on the Admin UI, Botpress will create an internal account for that user. These will be listed in the <code>workspaces.json</code> file.</p>
<p>There are two possible behaviors. You can either:</p>
<ul>
<li>Allow any user that successfully logs on using your SAML IdP to create an account. Set <code>pro.auth.allowSelfSignup</code> to <code>true</code></li>
<li>Manage users manually (you need to add their emails in the Collaborators page). Set <code>pro.auth.allowSelfSignup</code> to <code>false</code></li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="prerequisite"></a><a href="#prerequisite" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Prerequisite</h4>
<ul>
<li>Botpress Pro enabled with a valid license key</li>
<li>A SAML IdP (Identity Provider)</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="quick-start"></a><a href="#quick-start" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Quick Start</h4>
<ol>
<li>Open <code>botpress.config.json</code> and set <code>pro.auth.strategy = 'saml'</code></li>
<li>Configure the available options</li>
</ol>
<p>Here is a complete example</p>
<pre><code class="hljs css language-js"><span class="hljs-string">"auth"</span>: {
  <span class="hljs-string">"strategy"</span>: <span class="hljs-string">"saml"</span>,
  <span class="hljs-string">"options"</span>: {
    <span class="hljs-string">"authEndpoint"</span>: <span class="hljs-string">"https://botpress-saml-idp.auth0.com/somestuff/bla"</span>,
    <span class="hljs-string">"callbackUrl"</span>: <span class="hljs-string">"http://localhost:3000/admin/login-callback"</span>,
    <span class="hljs-string">"path"</span>: <span class="hljs-string">"/login-callback"</span>,
    <span class="hljs-string">"issuer"</span>: <span class="hljs-string">"botpress-saml"</span>,
    <span class="hljs-string">"certificate"</span>: <span class="hljs-string">"MIIDETCCAfmgAwIBAgIJIHQ75dJxjRuEMA0GCSqGSIb3DQEBCwUAMCYxJDAiBgNVBAMTG2JvdHByZXNzLXNhbWwtaWRwLmF1dGgwLmNvbTAeFw0xOTAxMTUxNTAzMDFaFw0zMjA5MjMxNTAzMDFaMCYxJDAiBgNVBAMTG2JvdHByZXNzLXNhbWwtaWRwLmF1dGgwLmNvbTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMUHXzCG3c4iSyU1N1Nzu8LsEIQ8tj5SHG+VtHrhWyfdckq5nP2wy/u6Tt20pdOx+4zu1718x2xVPMwFN9M2uUSJaY6vIXfHofKyn1htuYYzOklLZmnrLX4Pm7YHE2SubAsuwg6e7/sgIZ06T"</span>,
    <span class="hljs-string">"acceptedClockSkewMs"</span>: <span class="hljs-number">5000</span>
  },
  <span class="hljs-string">"fieldMapping"</span>: {
    <span class="hljs-string">"email"</span>: <span class="hljs-string">"http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress"</span>,
    <span class="hljs-string">"firstname"</span>: <span class="hljs-string">"cn"</span>
  },
  <span class="hljs-string">"allowSelfSignup"</span>: <span class="hljs-literal">false</span>
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="ldap"></a><a href="#ldap" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>LDAP</h3>
<h4><a class="anchor" aria-hidden="true" id="prerequisite-1"></a><a href="#prerequisite-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Prerequisite</h4>
<ul>
<li>Botpress Pro enabled with a valid license key</li>
<li>Information to access the LDAP server</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="quick-start-1"></a><a href="#quick-start-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Quick Start</h4>
<ol>
<li>Open <code>botpress.config.json</code> and set <code>pro.auth.strategy = 'ldap'</code></li>
<li>Configure the available options: <a href="https://github.com/botpress/botpress/blob/master/src/bp/core/config/botpress.config.ts">check the full configuration for more details</a></li>
</ol>
<h3><a class="anchor" aria-hidden="true" id="field-mapping"></a><a href="#field-mapping" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Field Mapping</h3>
<p>The <code>fieldMapping</code> configuration allows you to match existing properties of your users with the one Botpress uses. These are the fields that you can define for users: <code>email</code>, either <code>fullname</code> or <code>firstname</code> with <code>lastname</code>, <code>company</code>, <code>role</code> and <code>location</code>.</p>
<p>Whenever a user successfully logs on using SAML or LDAP, his details will be updated in his Botpress profile.</p>
<pre><code class="hljs css language-js">{
  <span class="hljs-string">"fieldMapping"</span>: {
    <span class="hljs-string">"email"</span>: <span class="hljs-string">"emailAddressOnIdp"</span>,
    <span class="hljs-string">"fullname"</span>: <span class="hljs-string">"userFullName"</span>,
    <span class="hljs-string">"company"</span>: <span class="hljs-string">"!Botpress"</span>,
    <span class="hljs-string">"role"</span>: <span class="hljs-string">"userRole"</span>,
    <span class="hljs-string">"location"</span>: <span class="hljs-string">"officeLocation"</span>
  }
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="user-authentication"></a><a href="#user-authentication" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>User Authentication</h2>
<p>Using External Authentication, it is possible to authenticate a user on your system, then validate his identity each time he sends a message to the bot. That information can be used in Actions, Hooks, and for Transitions on the Flow Editor.</p>
<p>Here's a summary of the process:</p>
<ol>
<li>User authenticate on your platform</li>
<li>Your platform returns a JWT token to the user and configure the webchat</li>
<li>The token is sent to Botpress everytime a message is sent</li>
<li>Botpress validates the token, decrypt the content and makes it available through <code>event.credentials</code></li>
</ol>
<h3><a class="anchor" aria-hidden="true" id="prerequisite-2"></a><a href="#prerequisite-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Prerequisite</h3>
<ul>
<li>Botpress Pro must be enabled with a valid license</li>
<li>A backend that will authenticate the user and generate the JWT token</li>
<li>The public key used by the backend</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="quick-start-2"></a><a href="#quick-start-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Quick Start</h3>
<ol>
<li>Edit <code>data/global/botpress.config.json</code> and set <code>pro.externalAuth.enabled</code> to <code>true</code></li>
<li>Configure the other variables for the JWT token (issuer, audience, algorithm, publicKey)</li>
<li>Restart Botpress</li>
<li>Edit the code of the embedded webchat to send the generated JWT token</li>
<li>Enjoy!</li>
</ol>
<p>Here is an example configuration, <a href="https://github.com/botpress/botpress/blob/master/src/bp/core/config/botpress.config.ts">check the full configuration for more details</a></p>
<pre><code class="hljs css language-js"><span class="hljs-string">"externalAuth"</span>: {
  <span class="hljs-string">"enabled"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-string">"audience"</span>: <span class="hljs-string">"users"</span>,
  <span class="hljs-string">"issuer"</span>: <span class="hljs-string">"botpress"</span>,
  <span class="hljs-string">"algorithm"</span>: <span class="hljs-string">"HS256"</span>
  <span class="hljs-string">"publicKey"</span>: <span class="hljs-string">"MIIDETCCAfmgAwIBAgIJIHQ75dJxjRuEMA0GCSqGSIb3DQEBCwUAMCYxJDAiBgNVBAMTG2JvdHByZXNzLXNhbWwtaWRwLmF1dGgwLmNvbTAeFw0xOTAxMTUxNTAzMDFaFw0zMjA5MjMxNTAzMDFaMCYxJDAiBgNVBAMTG2JvdHByZXNzLXNhbWwtaWRwLmF1dGgwLmNvbTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMUHXzCG3c4iSyU1N1Nzu8LsEIQ8tj5SHG+VtHrhWyfdckq5nP2wy/u6Tt20pdOx+4zu1718x2xVPMwFN9M2uUSJaY6vIXfHofKyn1htuYYzOklLZmnrLX4Pm7YHE2SubAsuwg6e7/sgIZ06T"</span>,
  }
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="how-to-configure-the-public-key"></a><a href="#how-to-configure-the-public-key" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How to configure the Public Key</h4>
<p>The public key can be added directly in the <code>botpress.config.json</code> file (on the same line). If you prefer to add the key in a file, remove the property <code>certificate</code>, and Botpress will load the key from <code>data/global/end_users_auth.key</code></p>
<h4><a class="anchor" aria-hidden="true" id="how-to-create-a-new-key-pair"></a><a href="#how-to-create-a-new-key-pair" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How to create a new Key Pair</h4>
<p>The certificate must be in the PEM format. You can use the below commands to generate one.</p>
<pre><code class="hljs css language-bash">ssh-keygen -t rsa -b 4096 -m PEM -f jwtRS256.key
openssl rsa -<span class="hljs-keyword">in</span> jwtRS256.key -pubout -outform PEM -out jwtRS256.key.pub
cat jwtRS256.key // Your private key
cat jwtRS256.key.pub // Your public key
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="authenticate-the-user"></a><a href="#authenticate-the-user" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Authenticate the user</h3>
<p>Once you have generated the JWT token, it must be passed down to the web chat. It will then be sent to Botpress with every message and events. Check out the <a href="../tutorials/existing-backend">Connectring your bot with your existing backend</a> for more details. There are two different situations:</p>
<ol>
<li>The user is authenticated before the webchat is loaded.</li>
</ol>
<p>Simply add the external token as an option to the <code>init</code> method:</p>
<pre><code class="hljs css language-js"><span class="hljs-built_in">window</span>.botpressWebChat.init({
  <span class="hljs-attr">host</span>: <span class="hljs-string">'http://localhost:3000'</span>,
  <span class="hljs-attr">botId</span>: botId,
  <span class="hljs-attr">externalAuthToken</span>: <span class="hljs-string">'my.jwt.token'</span>
})
</code></pre>
<ol start="2">
<li>The user is already discussing with the bot, then he is authenticated</li>
</ol>
<p>Use the <code>configure</code> method to change the option:</p>
<pre><code class="hljs css language-js"><span class="hljs-built_in">window</span>.botpressWebChat.configure({ <span class="hljs-attr">externalAuthToken</span>: <span class="hljs-string">'my.jwt.token'</span> })
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="how-to-use-the-authenticated-payload"></a><a href="#how-to-use-the-authenticated-payload" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How to use the authenticated payload</h3>
<p>When a user is authenticated, the JWT token is automatically decoded. If the token is valid, all the data it contains will be available through the <code>event.credentials</code> property. This can be accessed inside Hooks and while using Actions.</p>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#admin-authentication">Admin Authentication</a><ul class="toc-headings"><li><a href="#basic">Basic</a></li><li><a href="#saml">SAML</a></li><li><a href="#ldap">LDAP</a></li><li><a href="#field-mapping">Field Mapping</a></li></ul></li><li><a href="#user-authentication">User Authentication</a><ul class="toc-headings"><li><a href="#prerequisite-2">Prerequisite</a></li><li><a href="#quick-start-2">Quick Start</a></li><li><a href="#authenticate-the-user">Authenticate the user</a></li><li><a href="#how-to-use-the-authenticated-payload">How to use the authenticated payload</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><div><h5>Docs</h5><a href="/botpress-docs/docs/introduction">Getting Started</a><a href="https://botpress.com/reference/">API Reference</a></div><div><h5>Community</h5><a href="https://forum.botpress.com/" target="_blank" rel="noreferrer noopener">forum.botpress.com</a><a href="https://stackoverflow.com/search?q=botpress" target="_blank" rel="noreferrer noopener">Stack Overflow</a></div><div><h5>More</h5><a href="https://github.com/botpress">GitHub</a><a class="github-button" href="https://github.com/botpress/botpress" data-icon="octicon-star" data-count-href="/botpress/botpress/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a><a href="https://twitter.com/getbotpress">Twitter</a></div></section><a href="https://botpress.com/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/botpress-docs/img/botpress.svg" alt="Botpress, Inc." width="170" height="45"/></a><section class="copyright">Copyright © 2020 Botpress, Inc.</section></footer></div></body></html>
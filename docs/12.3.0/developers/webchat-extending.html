<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Extending the webchat · | Developer&#x27;s Guide</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## The Basics"/><meta name="docsearch:version" content="12.3.0"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Extending the webchat · | Developer&#x27;s Guide"/><meta property="og:type" content="website"/><meta property="og:url" content="https://Michael-N-M.github.io/botpress-docs/"/><meta property="og:description" content="## The Basics"/><meta property="og:image" content="https://Michael-N-M.github.io/botpress-docs/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://Michael-N-M.github.io/botpress-docs/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/botpress-docs/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="/js/hotjar.js"></script><script src="/botpress-docs/js/scrollSpy.js"></script><link rel="stylesheet" href="/botpress-docs/css/main.css"/><script src="/botpress-docs/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/botpress-docs/"><img class="logo" src="/botpress-docs/img/botpress_icon.svg" alt="| Developer&#x27;s Guide"/><h2 class="headerTitleWithLogo">| Developer&#x27;s Guide</h2></a><a href="/botpress-docs/versions"><h3>12.3.0</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/botpress-docs/docs/12.3.0/introduction" target="_self">Docs</a></li><li class=""><a href="https://botpress.com/reference/" target="_self">SDK</a></li><li class=""><a href="https://forum.botpress.com/" target="_self">Community</a></li><li class=""><a href="https://github.com/botpress/botpress" target="_self">Github</a></li><li class=""><a target="_self"></a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Extending the webchat</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="the-basics"></a><a href="#the-basics" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The Basics</h2>
<p>Every message sent by the bot to a user consist of a <code>payload</code>. That payload has a <code>type</code> property, that tells the webchat how the other information included on that payload should be rendered on screen.</p>
<p>There are different ways to send that payload to the user:</p>
<ul>
<li>Sending a Content Element via the Flow Editor <a href="https://github.com/botpress/botpress/blob/master/modules/builtin/src/content-types/image.js">example here</a></li>
<li>Sending an event via Hooks or Actions <a href="https://github.com/botpress/botpress/blob/master/examples/custom-component/src/hooks/after_incoming_middleware/sendoptions.js">example here</a></li>
</ul>
<p>There are multiple types already built in Botpress (they are listed at the bottom of this page), but if you require more advanced components, you can create them easily.</p>
<h3><a class="anchor" aria-hidden="true" id="prevent-storing-sensitive-information"></a><a href="#prevent-storing-sensitive-information" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Prevent storing sensitive information</h3>
<p>By default, the complete payload is stored in the database, so the information is not lost when the user refreshes the page. On some occasion, however, we may want to hide some properties deemed &quot;sensitive&quot; (ex: password, credit card, etc..).</p>
<p>To remove this information, there is a special property that you need to set: <code>sensitive</code>. Here's an example:</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> payload = {
  <span class="hljs-attr">type</span>: <span class="hljs-string">'login_prompt'</span>,
  <span class="hljs-attr">username</span>: <span class="hljs-string">'someuser'</span>,
  <span class="hljs-attr">password</span>: <span class="hljs-string">'abc123'</span>,
  <span class="hljs-attr">sensitive</span>: [<span class="hljs-string">'password'</span>]
}

<span class="hljs-comment">// This is the information that will be persisted: { type: 'login_prompt', username: 'someuser' }</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="creating-a-custom-component"></a><a href="#creating-a-custom-component" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating a Custom Component</h2>
<p>We already have an <a href="https://github.com/botpress/botpress/tree/master/examples/custom-component">example module</a> showing how to create them, so we will just make a quick recap here.</p>
<p>Custom components leverages the <code>custom</code> payload type, which is</p>
<ol>
<li>Create a module (we have <a href="https://github.com/botpress/botpress/tree/master/examples/module-templates">example templates here</a>)</li>
<li>Develop your component</li>
<li>Export your component in the <code>lite.jsx</code> file (<a href="https://github.com/botpress/botpress/blob/master/examples/custom-component/src/views/lite/index.jsx">here's a couple of different ways to do it</a>)</li>
<li>Send a custom payload to the user:</li>
</ol>
<pre><code class="hljs css language-js">payload: {
  <span class="hljs-attr">type</span>: <span class="hljs-string">'custom'</span> <span class="hljs-comment">// Important, this is how the magic operates</span>
  <span class="hljs-attr">module</span>: <span class="hljs-string">'myModule'</span> <span class="hljs-comment">// The name of your module, must match the one in package.json</span>
  <span class="hljs-attr">component</span>: <span class="hljs-string">'YourComponent'</span> <span class="hljs-comment">// This is the name of the component, exported from lite.jsx</span>
  <span class="hljs-comment">// Feel free to add any other properties here, they will all be passed down to your component</span>
  <span class="hljs-attr">myCustomProp1</span>: <span class="hljs-string">'somemorestuff'</span>
  <span class="hljs-attr">someOtherProperty</span>: <span class="hljs-string">'anything'</span>
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="what-can-i-do-in-my-component-"></a><a href="#what-can-i-do-in-my-component-" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What can I do in my component ?</h3>
<p>There are a couple of properties that are passed down to your custom component. These can be used to customize the displayed information, and/or to pursue interactions.</p>
<table>
<thead>
<tr><th>Property</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>...props</td><td>The payload properties are available on the root object (this.props.)</td></tr>
<tr><td>onSendData</td><td>This method can be used to send a payload to the bot on the behalf of the user</td></tr>
<tr><td>onFileUpload</td><td>Instead of sending an event, this will upload the specified file</td></tr>
<tr><td>sentOn</td><td>This is the timestamp of the message.</td></tr>
<tr><td>isLastGroup</td><td>Indicates if your component is part of the group of messages sent by the bot</td></tr>
<tr><td>isLastOfGroup</td><td>Indicates if your component is the last message in its group</td></tr>
<tr><td>keyboard</td><td>This object allows you to manipulate the keyboard (more below)</td></tr>
<tr><td>wrapped</td><td>Represent any child components (more below)</td></tr>
</tbody>
</table>
<blockquote>
<p>isLastGroup and isLastOfGroup can be combined to let your component know if the current message is the last one the user is seeing. This can be used, for example, to display feedback buttons, a login form or anything else, that will disappear when the user continues the discussion.</p>
</blockquote>
<h4><a class="anchor" aria-hidden="true" id="wrappers"></a><a href="#wrappers" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Wrappers</h4>
<p>Wrappers allows you to transform the content of a payload before passing it down to the renderer, or to another component. We have some <a href="https://github.com/botpress/botpress/tree/master/examples/custom-component/src/views/lite/components/Advanced.jsx">example components here</a></p>
<p>Here's an example of a wrapped text message:</p>
<pre><code class="hljs css language-js">payload: {
  <span class="hljs-attr">type</span>: <span class="hljs-string">'custom'</span>,
  <span class="hljs-attr">module</span>: <span class="hljs-string">'myModule'</span>,
  <span class="hljs-attr">component</span>: <span class="hljs-string">'MyComponent'</span>
  <span class="hljs-attr">wrapped</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'text'</span>
    <span class="hljs-attr">text</span>: <span class="hljs-string">'Hello user!'</span>
  }
}
</code></pre>
<p>It is also possible to chain multiple custom components using the <code>wrapped</code> property</p>
<h4><a class="anchor" aria-hidden="true" id="keyboards"></a><a href="#keyboards" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Keyboards</h4>
<p>Keyboard allows you to add elements before or after the composer. Keyboard items can be buttons, or any other type of valid component. Use <code>Keyboard.Prepend</code> to display it before the composer, and <code>Keyboard.Append</code> to display it after.</p>
<pre><code class="hljs css language-js">...
render(){
  <span class="hljs-comment">// First of all, import the keyboard object</span>
  <span class="hljs-keyword">const</span> Keyboard = <span class="hljs-keyword">this</span>.props.keyboard

  <span class="hljs-comment">// Create any type of component</span>
  <span class="hljs-keyword">const</span> something = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>This will be displayed over the composer, as long as visible is true<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>

  <span class="hljs-comment">// Your custom keyboard will only be displayed if that message is the last one displayed</span>
  <span class="hljs-keyword">const</span> visible = <span class="hljs-keyword">this</span>.props.isLastGroup &amp;&amp; <span class="hljs-keyword">this</span>.props.isLastOfGroup

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Keyboard.Prepend</span> <span class="hljs-attr">keyboard</span>=<span class="hljs-string">{something}</span> <span class="hljs-attr">visible</span>=<span class="hljs-string">{visible}</span>&gt;</span>
      This text will be displayed in the chat window
    <span class="hljs-tag">&lt;/<span class="hljs-name">Keyboard.Prepend</span>&gt;</span></span>à
  )
}
</code></pre>
<h5><a class="anchor" aria-hidden="true" id="using-a-button-keyboard"></a><a href="#using-a-button-keyboard" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using a Button Keyboard</h5>
<p>There is a built hook that makes it easy to add buttons to any kind of element. You can pass down an array of buttons, or an array of array of buttons.</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> payload = {
  <span class="hljs-attr">type</span>: <span class="hljs-string">'text'</span>
  <span class="hljs-attr">text</span>: <span class="hljs-string">'hello'</span>,
  <span class="hljs-attr">quick_replies</span>: [
      [{ <span class="hljs-attr">label</span>: <span class="hljs-string">'row 1, button 1'</span>, <span class="hljs-attr">payload</span>: <span class="hljs-string">'something'</span> }, { <span class="hljs-attr">label</span>: <span class="hljs-string">'row 1, button 2'</span>, <span class="hljs-attr">payload</span>: <span class="hljs-string">'something'</span> }],
      [{ <span class="hljs-attr">label</span>: <span class="hljs-string">'row 2, button 1'</span>, <span class="hljs-attr">payload</span>: <span class="hljs-string">'something'</span> }],
      [{ <span class="hljs-attr">label</span>: <span class="hljs-string">'row 3, button 1'</span>, <span class="hljs-attr">payload</span>: <span class="hljs-string">'something'</span> }]
    ]
}
</code></pre>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#the-basics">The Basics</a><ul class="toc-headings"><li><a href="#prevent-storing-sensitive-information">Prevent storing sensitive information</a></li></ul></li><li><a href="#creating-a-custom-component">Creating a Custom Component</a><ul class="toc-headings"><li><a href="#what-can-i-do-in-my-component-">What can I do in my component ?</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><div><h5>Docs</h5><a href="/botpress-docs/docs/introduction">Getting Started</a><a href="https://botpress.com/reference/">API Reference</a></div><div><h5>Community</h5><a href="https://forum.botpress.com/" target="_blank" rel="noreferrer noopener">forum.botpress.com</a><a href="https://stackoverflow.com/search?q=botpress" target="_blank" rel="noreferrer noopener">Stack Overflow</a></div><div><h5>More</h5><a href="https://github.com/botpress">GitHub</a><a class="github-button" href="https://github.com/botpress/botpress" data-icon="octicon-star" data-count-href="/botpress/botpress/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a><a href="https://twitter.com/getbotpress">Twitter</a></div></section><a href="https://botpress.com/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/botpress-docs/img/botpress.svg" alt="Botpress, Inc." width="170" height="45"/></a><section class="copyright">Copyright © 2020 Botpress, Inc.</section></footer></div></body></html>